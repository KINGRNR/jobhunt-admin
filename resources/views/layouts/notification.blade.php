<div class="card shadow-none rounded-0">
    <!--begin::Header-->
    <div class="card-header" id="kt_activities_header">
        <h3 class="card-title fw-bolder text-dark">Notification</h3>
        <div class="card-toolbar">
            <button type="button" class="btn btn-sm btn-icon btn-active-light-primary me-n5" id="kt_activities_close">
                <!--begin::Svg Icon | path: icons/duotune/arrows/arr061.svg-->
                <span class="svg-icon svg-icon-1">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none">
                        <rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1"
                            transform="rotate(-45 6 17.3137)" fill="black" />
                        <rect x="7.41422" y="6" width="16" height="2" rx="1"
                            transform="rotate(45 7.41422 6)" fill="black" />
                    </svg>
                </span>
                <!--end::Svg Icon-->
            </button>
        </div>
    </div>
    <!--end::Header-->
    <!--begin::Body-->
    <div class="card-body position-relative" id="kt_activities_body">
        <!--begin::Content-->
        <div id="kt_activities_scroll" class="position-relative scroll-y me-n5 pe-5" data-kt-scroll="true"
            data-kt-scroll-height="auto" data-kt-scroll-wrappers="#kt_activities_body"
            data-kt-scroll-dependencies="#kt_activities_header, #kt_activities_footer" data-kt-scroll-offset="5px">
            <!--begin::Timeline items-->
            <div class="timeline">

                {{-- <div class="timeline-item">
                    <!--begin::Timeline line-->
                    <div class="timeline-line w-40px"></div>
                    <!--end::Timeline line-->
                    <!--begin::Timeline icon-->
                    <div class="timeline-icon symbol symbol-circle symbol-40px">
                        <div class="symbol-label bg-light">
                            <!--begin::Svg Icon | path: icons/duotune/communication/com009.svg-->
                            <span class="svg-icon svg-icon-2 svg-icon-gray-500">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                    viewBox="0 0 24 24" fill="none">
                                    <path opacity="0.3"
                                        d="M5.78001 21.115L3.28001 21.949C3.10897 22.0059 2.92548 22.0141 2.75004 21.9727C2.57461 21.9312 2.41416 21.8418 2.28669 21.7144C2.15923 21.5869 2.06975 21.4264 2.0283 21.251C1.98685 21.0755 1.99507 20.892 2.05201 20.7209L2.886 18.2209L7.22801 13.879L10.128 16.774L5.78001 21.115Z"
                                        fill="black" />
                                    <path
                                        d="M21.7 8.08899L15.911 2.30005C15.8161 2.2049 15.7033 2.12939 15.5792 2.07788C15.455 2.02637 15.3219 1.99988 15.1875 1.99988C15.0531 1.99988 14.92 2.02637 14.7958 2.07788C14.6717 2.12939 14.5589 2.2049 14.464 2.30005L13.74 3.02295C13.548 3.21498 13.4402 3.4754 13.4402 3.74695C13.4402 4.01849 13.548 4.27892 13.74 4.47095L14.464 5.19397L11.303 8.35498C10.1615 7.80702 8.87825 7.62639 7.62985 7.83789C6.38145 8.04939 5.2293 8.64265 4.332 9.53601C4.14026 9.72817 4.03256 9.98855 4.03256 10.26C4.03256 10.5315 4.14026 10.7918 4.332 10.984L13.016 19.667C13.208 19.859 13.4684 19.9668 13.74 19.9668C14.0115 19.9668 14.272 19.859 14.464 19.667C15.3575 18.77 15.9509 17.618 16.1624 16.3698C16.374 15.1215 16.1932 13.8383 15.645 12.697L18.806 9.53601L19.529 10.26C19.721 10.452 19.9814 10.5598 20.253 10.5598C20.5245 10.5598 20.785 10.452 20.977 10.26L21.7 9.53601C21.7952 9.44108 21.8706 9.32825 21.9221 9.2041C21.9737 9.07995 22.0002 8.94691 22.0002 8.8125C22.0002 8.67809 21.9737 8.54505 21.9221 8.4209C21.8706 8.29675 21.7952 8.18392 21.7 8.08899Z"
                                        fill="black" />
                                </svg>
                            </span>
                            <!--end::Svg Icon-->
                        </div>
                    </div>
                    <!--end::Timeline icon-->
                    <!--begin::Timeline content-->
                    <div class="timeline-content mb-10 mt-n2">
                        <!--begin::Timeline heading-->
                        <div class="overflow-auto pe-3">
                            <!--begin::Title-->
                            <div class="fs-5 fw-bold mb-2">Invitation for crafting engaging designs
                                that speak human workshop</div>
                            <!--end::Title-->
                            <!--begin::Description-->
                            <div class="d-flex align-items-center mt-1 fs-6">
                                <!--begin::Info-->
                                <div class="text-muted me-2 fs-7">Sent at 4:23 PM by</div>
                                <!--end::Info-->
                                <!--begin::User-->
                                <div class="symbol symbol-circle symbol-25px" data-bs-toggle="tooltip"
                                    data-bs-boundary="window" data-bs-placement="top" title="Alan Nilson">
                                    <img src="assets/media/avatars/150-2.jpg" alt="img" />
                                </div>
                                <!--end::User-->
                            </div>
                            <!--end::Description-->
                        </div>
                        <!--end::Timeline heading-->
                    </div>
                    <!--end::Timeline content-->
                </div> --}}
                <!--end::Timeline item-->
                <!--begin::Timeline item-->
                {{-- <div class="timeline-item">
                    <!--begin::Timeline line-->
                    <div class="timeline-line w-40px"></div>
                    <!--end::Timeline line-->
                    <!--begin::Timeline icon-->
                    <div class="timeline-icon symbol symbol-circle symbol-40px">
                        <div class="symbol-label bg-light">
                            <!--begin::Svg Icon | path: icons/duotune/coding/cod008.svg-->
                            <span class="svg-icon svg-icon-2 svg-icon-gray-500">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                    viewBox="0 0 24 24" fill="none">
                                    <path
                                        d="M11.2166 8.50002L10.5166 7.80007C10.1166 7.40007 10.1166 6.80005 10.5166 6.40005L13.4166 3.50002C15.5166 1.40002 18.9166 1.50005 20.8166 3.90005C22.5166 5.90005 22.2166 8.90007 20.3166 10.8001L17.5166 13.6C17.1166 14 16.5166 14 16.1166 13.6L15.4166 12.9C15.0166 12.5 15.0166 11.9 15.4166 11.5L18.3166 8.6C19.2166 7.7 19.1166 6.30002 18.0166 5.50002C17.2166 4.90002 16.0166 5.10007 15.3166 5.80007L12.4166 8.69997C12.2166 8.89997 11.6166 8.90002 11.2166 8.50002ZM11.2166 15.6L8.51659 18.3001C7.81659 19.0001 6.71658 19.2 5.81658 18.6C4.81658 17.9 4.71659 16.4 5.51659 15.5L8.31658 12.7C8.71658 12.3 8.71658 11.7001 8.31658 11.3001L7.6166 10.6C7.2166 10.2 6.6166 10.2 6.2166 10.6L3.6166 13.2C1.7166 15.1 1.4166 18.1 3.1166 20.1C5.0166 22.4 8.51659 22.5 10.5166 20.5L13.3166 17.7C13.7166 17.3 13.7166 16.7001 13.3166 16.3001L12.6166 15.6C12.3166 15.2 11.6166 15.2 11.2166 15.6Z"
                                        fill="black" />
                                    <path opacity="0.3"
                                        d="M5.0166 9L2.81659 8.40002C2.31659 8.30002 2.0166 7.79995 2.1166 7.19995L2.31659 5.90002C2.41659 5.20002 3.21659 4.89995 3.81659 5.19995L6.0166 6.40002C6.4166 6.60002 6.6166 7.09998 6.5166 7.59998L6.31659 8.30005C6.11659 8.80005 5.5166 9.1 5.0166 9ZM8.41659 5.69995H8.6166C9.1166 5.69995 9.5166 5.30005 9.5166 4.80005L9.6166 3.09998C9.6166 2.49998 9.2166 2 8.5166 2H7.81659C7.21659 2 6.71659 2.59995 6.91659 3.19995L7.31659 4.90002C7.41659 5.40002 7.91659 5.69995 8.41659 5.69995ZM14.6166 18.2L15.1166 21.3C15.2166 21.8 15.7166 22.2 16.2166 22L17.6166 21.6C18.1166 21.4 18.4166 20.8 18.1166 20.3L16.7166 17.5C16.5166 17.1 16.1166 16.9 15.7166 17L15.2166 17.1C14.8166 17.3 14.5166 17.7 14.6166 18.2ZM18.4166 16.3L19.8166 17.2C20.2166 17.5 20.8166 17.3 21.0166 16.8L21.3166 15.9C21.5166 15.4 21.1166 14.8 20.5166 14.8H18.8166C18.0166 14.8 17.7166 15.9 18.4166 16.3Z"
                                        fill="black" />
                                </svg>
                            </span>
                            <!--end::Svg Icon-->
                        </div>
                    </div>
                    <!--end::Timeline icon-->
                    <!--begin::Timeline content-->
                    <div class="timeline-content mb-10 mt-n1">
                        <!--begin::Timeline heading-->
                        <div class="mb-5 pe-3">
                            <!--begin::Title-->
                            <a href="#"
                                class="fs-5 fw-bold text-gray-800 text-hover-primary mb-2">3 New
                                Incoming Project Files:</a>
                            <!--end::Title-->
                            <!--begin::Description-->
                            <div class="d-flex align-items-center mt-1 fs-6">
                                <!--begin::Info-->
                                <div class="text-muted me-2 fs-7">Sent at 10:30 PM by</div>
                                <!--end::Info-->
                                <!--begin::User-->
                                <div class="symbol symbol-circle symbol-25px" data-bs-toggle="tooltip"
                                    data-bs-boundary="window" data-bs-placement="top"
                                    title="Jan Hummer">
                                    <img src="assets/media/avatars/150-6.jpg" alt="img" />
                                </div>
                                <!--end::User-->
                            </div>
                            <!--end::Description-->
                        </div>
                        <!--end::Timeline heading-->
                        <!--begin::Timeline details-->
                        <div class="overflow-auto pb-5">
                            <div
                                class="d-flex align-items-center border border-dashed border-gray-300 rounded min-w-700px p-5">
                                <!--begin::Item-->
                                <div class="d-flex flex-aligns-center pe-10 pe-lg-20">
                                    <!--begin::Icon-->
                                    <img alt="" class="w-30px me-3"
                                        src="assets/media/svg/files/pdf.svg" />
                                    <!--end::Icon-->
                                    <!--begin::Info-->
                                    <div class="ms-1 fw-bold">
                                        <!--begin::Desc-->
                                        <a href="#"
                                            class="fs-6 text-hover-primary fw-bolder">Finance KPI App
                                            Guidelines</a>
                                        <!--end::Desc-->
                                        <!--begin::Number-->
                                        <div class="text-gray-400">1.9mb</div>
                                        <!--end::Number-->
                                    </div>
                                    <!--begin::Info-->
                                </div>
                                <!--end::Item-->
                                <!--begin::Item-->
                                <div class="d-flex flex-aligns-center pe-10 pe-lg-20">
                                    <!--begin::Icon-->
                                    <img alt="" class="w-30px me-3"
                                        src="assets/media/svg/files/doc.svg" />
                                    <!--end::Icon-->
                                    <!--begin::Info-->
                                    <div class="ms-1 fw-bold">
                                        <!--begin::Desc-->
                                        <a href="#"
                                            class="fs-6 text-hover-primary fw-bolder">Client UAT
                                            Testing Results</a>
                                        <!--end::Desc-->
                                        <!--begin::Number-->
                                        <div class="text-gray-400">18kb</div>
                                        <!--end::Number-->
                                    </div>
                                    <!--end::Info-->
                                </div>
                                <!--end::Item-->
                                <!--begin::Item-->
                                <div class="d-flex flex-aligns-center">
                                    <!--begin::Icon-->
                                    <img alt="" class="w-30px me-3"
                                        src="assets/media/svg/files/css.svg" />
                                    <!--end::Icon-->
                                    <!--begin::Info-->
                                    <div class="ms-1 fw-bold">
                                        <!--begin::Desc-->
                                        <a href="#"
                                            class="fs-6 text-hover-primary fw-bolder">Finance
                                            Reports</a>
                                        <!--end::Desc-->
                                        <!--begin::Number-->
                                        <div class="text-gray-400">20mb</div>
                                        <!--end::Number-->
                                    </div>
                                    <!--end::Icon-->
                                </div>
                                <!--end::Item-->
                            </div>
                        </div>
                        <!--end::Timeline details-->
                    </div>
                    <!--end::Timeline content-->
                </div> --}}
                <!--end::Timeline item-->
            </div>
            <!--end::Timeline items-->
        </div>
        <!--end::Content-->
    </div>
    <div class="card-footer py-5 text-center" id="kt_activities_footer">
        <a href="#" class="btn btn-bg-body text-primary">Tandai Dibaca Semua</a>
    </div>
    <!--end::Footer-->
</div>

<script>
    $(() => {
        showNotif()

    })
    showNotif = () => {
        $.ajax({
            url: "{{ route('notification.index') }}",
            // type: 'POST',
            // data: {
            //     _token: '{{ csrf_token() }}',
            //     id: id
            // },
            dataType: 'json',
            success: function(response) {
                $('.timeline').empty()
                $('#badge_notif').addClass('d-none');
                let unread = 0;

                response.data.forEach((item) => {
                    if (item.notification_read == 0) {
                        unread++;
                    }
                });

                if (unread != 0) {
                    $('#badge_notif').removeClass('d-none').text(unread);
                }
                $.each(response.data, (i, v) => {
                    let timestamp = new Date(v.notification_created_at);
                    let hour = timestamp.getHours();
                    let minute = timestamp.getMinutes();
                    html = `<div class="timeline-item">
                    <!--begin::Timeline line-->
                    <div class="timeline-line w-40px"></div>
                    <!--end::Timeline line-->
                    <!--begin::Timeline icon-->
                    <div class="timeline-icon symbol symbol-circle symbol-40px">
                        <div class="symbol-label bg-light">
                            ${
        v.notification_jenis == 1
            ? `                            <span class="svg-icon svg-icon-2 svg-icon-gray-500">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                    viewBox="0 0 24 24" fill="none">
                                    <path opacity="0.3"
                                        d="M5.78001 21.115L3.28001 21.949C3.10897 22.0059 2.92548 22.0141 2.75004 21.9727C2.57461 21.9312 2.41416 21.8418 2.28669 21.7144C2.15923 21.5869 2.06975 21.4264 2.0283 21.251C1.98685 21.0755 1.99507 20.892 2.05201 20.7209L2.886 18.2209L7.22801 13.879L10.128 16.774L5.78001 21.115Z"
                                        fill="black" />
                                    <path
                                        d="M21.7 8.08899L15.911 2.30005C15.8161 2.2049 15.7033 2.12939 15.5792 2.07788C15.455 2.02637 15.3219 1.99988 15.1875 1.99988C15.0531 1.99988 14.92 2.02637 14.7958 2.07788C14.6717 2.12939 14.5589 2.2049 14.464 2.30005L13.74 3.02295C13.548 3.21498 13.4402 3.4754 13.4402 3.74695C13.4402 4.01849 13.548 4.27892 13.74 4.47095L14.464 5.19397L11.303 8.35498C10.1615 7.80702 8.87825 7.62639 7.62985 7.83789C6.38145 8.04939 5.2293 8.64265 4.332 9.53601C4.14026 9.72817 4.03256 9.98855 4.03256 10.26C4.03256 10.5315 4.14026 10.7918 4.332 10.984L13.016 19.667C13.208 19.859 13.4684 19.9668 13.74 19.9668C14.0115 19.9668 14.272 19.859 14.464 19.667C15.3575 18.77 15.9509 17.618 16.1624 16.3698C16.374 15.1215 16.1932 13.8383 15.645 12.697L18.806 9.53601L19.529 10.26C19.721 10.452 19.9814 10.5598 20.253 10.5598C20.5245 10.5598 20.785 10.452 20.977 10.26L21.7 9.53601C21.7952 9.44108 21.8706 9.32825 21.9221 9.2041C21.9737 9.07995 22.0002 8.94691 22.0002 8.8125C22.0002 8.67809 21.9737 8.54505 21.9221 8.4209C21.8706 8.29675 21.7952 8.18392 21.7 8.08899Z"
                                        fill="black" />
                                </svg>
                            </span>`
            : v.notification_jenis == 2
            ? `										<span class="svg-icon svg-icon-2 svg-icon-gray-500">
											<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
												<path d="M11.2166 8.50002L10.5166 7.80007C10.1166 7.40007 10.1166 6.80005 10.5166 6.40005L13.4166 3.50002C15.5166 1.40002 18.9166 1.50005 20.8166 3.90005C22.5166 5.90005 22.2166 8.90007 20.3166 10.8001L17.5166 13.6C17.1166 14 16.5166 14 16.1166 13.6L15.4166 12.9C15.0166 12.5 15.0166 11.9 15.4166 11.5L18.3166 8.6C19.2166 7.7 19.1166 6.30002 18.0166 5.50002C17.2166 4.90002 16.0166 5.10007 15.3166 5.80007L12.4166 8.69997C12.2166 8.89997 11.6166 8.90002 11.2166 8.50002ZM11.2166 15.6L8.51659 18.3001C7.81659 19.0001 6.71658 19.2 5.81658 18.6C4.81658 17.9 4.71659 16.4 5.51659 15.5L8.31658 12.7C8.71658 12.3 8.71658 11.7001 8.31658 11.3001L7.6166 10.6C7.2166 10.2 6.6166 10.2 6.2166 10.6L3.6166 13.2C1.7166 15.1 1.4166 18.1 3.1166 20.1C5.0166 22.4 8.51659 22.5 10.5166 20.5L13.3166 17.7C13.7166 17.3 13.7166 16.7001 13.3166 16.3001L12.6166 15.6C12.3166 15.2 11.6166 15.2 11.2166 15.6Z" fill="black"></path>
												<path opacity="0.3" d="M5.0166 9L2.81659 8.40002C2.31659 8.30002 2.0166 7.79995 2.1166 7.19995L2.31659 5.90002C2.41659 5.20002 3.21659 4.89995 3.81659 5.19995L6.0166 6.40002C6.4166 6.60002 6.6166 7.09998 6.5166 7.59998L6.31659 8.30005C6.11659 8.80005 5.5166 9.1 5.0166 9ZM8.41659 5.69995H8.6166C9.1166 5.69995 9.5166 5.30005 9.5166 4.80005L9.6166 3.09998C9.6166 2.49998 9.2166 2 8.5166 2H7.81659C7.21659 2 6.71659 2.59995 6.91659 3.19995L7.31659 4.90002C7.41659 5.40002 7.91659 5.69995 8.41659 5.69995ZM14.6166 18.2L15.1166 21.3C15.2166 21.8 15.7166 22.2 16.2166 22L17.6166 21.6C18.1166 21.4 18.4166 20.8 18.1166 20.3L16.7166 17.5C16.5166 17.1 16.1166 16.9 15.7166 17L15.2166 17.1C14.8166 17.3 14.5166 17.7 14.6166 18.2ZM18.4166 16.3L19.8166 17.2C20.2166 17.5 20.8166 17.3 21.0166 16.8L21.3166 15.9C21.5166 15.4 21.1166 14.8 20.5166 14.8H18.8166C18.0166 14.8 17.7166 15.9 18.4166 16.3Z" fill="black"></path>
											</svg>
										</span>`
            : ''
    }
                        </div>
                    </div>
                    <!--end::Timeline icon-->
                    <!--begin::Timeline content-->
                    <div class="timeline-content mb-10 border rounded" style="border-color: #ced4da; padding: 10px;">
        <!--begin::Timeline heading-->
        <div class="overflow-auto pe-3">
            <!--begin::Title-->
            ${
        v.notification_jenis == 1
            ? `<div class="fs-5 fw-bold badge badge-light-warning">${v.notification_title}</div>`
            : v.notification_jenis == 2
            ? `<div class="fs-5 fw-bold badge badge-light">${v.notification_title}</div>`
            : ''
    }
            <div class="fs-5 mb-2">${v.notification_message}</div>
            <!--end::Title-->
            <!--begin::Description-->
            <div class="d-flex align-items-center mt-1 fs-6">
                <!--begin::Info-->
                <div class="text-muted me-2 fs-7">Sent at ${hour}:${minute} by </div><span class="text-bold">${v.notification_by}</span>
                <!--end::Info-->
                <!--begin::User-->
            </div>
            ${v.notification_read == 0 ? '<button class="btn btn-light btn-sm" data-id="' + v.notification_id + '" onclick="onRead(this)">Read</button> <span class="ms-2 badge badge-light-danger fw-bolder">Belum di Baca</span>' : '<span class=" badge badge-light-success fw-bolder">Sudah di Baca</span>'}

            <!--end::Description-->
        </div>
        <!--end::Timeline heading-->
    </div>
                    <!--end::Timeline content-->
                </div>`;
                    $('.timeline').append(html);
                })

            },
            error: function(error) {
                console.log(error);
            }
        });
    }
    onRead = (id) => {
        var notification = $(id).attr('data-id');
        $.ajax({
            url: '/notification/read',
            type: 'POST',
            data: {
                _token: '{{ csrf_token() }}',
                id: notification
            },
            dataType: 'json',
            success: function(response) {
                showNotif();
            },
            error: function(error) {
                console.log(error);
            }
        });
    }
</script>
